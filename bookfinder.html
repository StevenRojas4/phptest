<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Book Finder</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .book-card {
      background-color: white;
      padding: 15px;
      margin: 15px auto;
      max-width: 600px;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<header>
  <h1>Book Finder</h1>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="calculator.html">Calculator</a>
  <a href="about.html">About</a>
  <a href="guestbook.html">Guestbook</a>
  <a href="bookfinder.html">Book Finder</a>
</nav>

<main>
  <h2>Search for Books</h2>
  
  <label for="genre">Genre:</label>
  <input type="text" id="genre" placeholder="e.g., Classic, Fantasy">

  <label for="author">Author:</label>
  <input type="text" id="author" placeholder="e.g., Orwell">

  <label for="year">Year:</label>
  <input type="text" id="year" placeholder="e.g., 1937">

  <button onclick="loadBooks()">Find Books</button>

  <div id="results"></div>
</main>

<script>
function loadBooks() {
  const genre = document.getElementById('genre').value.toLowerCase();
  const author = document.getElementById('author').value.toLowerCase();
  const year = document.getElementById('year').value;

  fetch('books.xml')
    .then(response => response.text())
    .then(data => {
      const parser = new DOMParser();
      const xml = parser.parseFromString(data, "application/xml");
      const books = xml.getElementsByTagName('book');
      let output = "";

      for (let i = 0; i < books.length; i++) {
        const bookTitle = books[i].getElementsByTagName("title")[0].textContent;
        const bookAuthor = books[i].getElementsByTagName("author")[0].textContent;
        const bookYear = books[i].getElementsByTagName("year")[0].textContent;
        const bookGenre = books[i].getElementsByTagName("genre")[0].textContent;

        if (
          (genre && bookGenre.toLowerCase() !== genre) ||
          (author && !bookAuthor.toLowerCase().includes(author)) ||
          (year && bookYear !== year)
        ) {
          continue;
        }

        output += `
          <div class="book-card">
            <h3>${bookTitle}</h3>
            <p><strong>Author:</strong> ${bookAuthor}</p>
            <p><strong>Year:</strong> ${bookYear}</p>
            <p><strong>Genre:</strong> ${bookGenre}</p>
          </div>
        `;
      }

      document.getElementById('results').innerHTML = output || "<p>No matching books found.</p>";
    })
    .catch(error => {
      document.getElementById('results').innerHTML = "<p style='color:red;'>Failed to load books.</p>";
      console.error(error);
    });
}
</script>

</body>
</html>
